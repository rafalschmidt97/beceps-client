@page "/workout/{workoutIndex:int}/routine/{routineIndex:int}"
@using Beceps.Shared.Components.Header;
@using Beceps.Shared.Domain;
@using Beceps.Workouts
@inject HttpClient Http
@inject NavigationManager LocalNavigationManager
@inject WorkoutState WorkoutState

<Header Title=@($"{Set.Name} {CurrentSetIndex}/{Set.SetsAmount}") Icon="fas fa-bars" IconText="" />

<h2 class="text-center text-white mt-5">Target: @($"{Set.RepsAmount}")</h2>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-xs">
            <button type="button" class="btn btn-primary btn-circle">-</button>
        </div>
        <div class="col-xs h1 mt-3 text-white mx-1">
            4
        </div>
        <div class="col-xs">
            <button type="button" class="btn btn-primary btn-circle">+</button>
        </div>
    </div>
</div>

<div class="card mt-5 mx-auto">
    <div class="card-body">
        <h5 class="card-title">Exercise History</h5>
        <ul class="list-group">
            <li class="list-group-item">Deadlift 1: 10</li>
            <li class="list-group-item">Deadlift 2: 9</li>
            <li class="list-group-item">Deadlift 3: 12</li>
            <li class="list-group-item">Deadlift 4: ...</li>
        </ul>
    </div>
</div>


<div class="position-absolute w-100" style="bottom:0; left:0;">
    <button class="btn btn-xlg btn-warning w-100 text-center">Skip Exercise</button>
</div>

@code {
    [Parameter]
    public int WorkoutIndex { get; set; }
    [Parameter]
    public int RoutineIndex { get; set; }
    public int CurrentSetIndex { get; set; } = 1;
    public WorkoutDto Workout { get; set; }
    public RoutineDto Routine { get; set; }
    public SetDto Set { get; set; }

    protected override void OnInitialized()
    {
        Workout = WorkoutState.Workouts.ElementAt(WorkoutIndex);
        Routine = Workout.Routines.ElementAt(RoutineIndex);
        Set = Routine.Sets.FirstOrDefault();
    }
}
